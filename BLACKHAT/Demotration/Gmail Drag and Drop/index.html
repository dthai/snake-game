<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en-GB">

<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
	<meta name="author" content="The CSS Ninja">
	<meta name="keywords" content="Drag and drop, HTML5, DownloadURL, setData, dataTransfer">
	<meta name="description" content="How to create reverse drag and drop functionality like Gmail in Chrome 5 and upwards">
	<meta name="robots" content="all">
	<link rel="stylesheet" href="./html5reset.css" type="text/css">
    <link rel="stylesheet" href="./html5simple.css" type="text/css">
	
	<link rel="stylesheet" type="text/css" href="_styles.css" media="screen">
	<script type="text/javascript" async="" src="./ga.js"></script><script>
    function DragHandler(target, e) {
        e.dataTransfer.setData('Text', target.id);
    }

    function DropHandler(target, e) {
       var id = e.dataTransfer.getData('Text');
       target.appendChild(document.getElementById(id));
       e.preventDefault();
    }
    </script>
	<style>
	body{
		background-color:#fff;
	}
	</style>
	<title>Drag a file from a website to your filesystem like Gmail does | The CSS Ninja</title>

</head>
<body style="width:877px !important">
	<header>
        <h1>HTML5 Drag &amp; Drop Demo</h1>
    </header>
	
	<section class="main-container">
		
		<div id="dndcontainer">
			<h1>Type 1: Drag inside browser</h1>
			<div ondrop="DropHandler(this, event)" ondragenter="return false" ondragover="return false" class="dndbox">
				<img src="./img/item-1.png" id="club" ondragstart="DragHandler(this, event)" width="75" height="75" border="0" alt="">
				<img src="./img/item-2.png" id="heart" ondragstart="DragHandler(this, event)" width="75" height="75" border="0" alt="">
				<img src="./img/item-3.png" id="spade" ondragstart="DragHandler(this, event)" width="75" height="75" border="0" alt="">
				
			</div>

			<div ondrop="DropHandler(this, event)" ondragenter="return false" ondragover="return false" class="dndbox"><img src="./img/item-4.png" id="diamond" ondragstart="DragHandler(this, event)" width="75" height="75" border="0" alt=""></div>

		</div>
	
		<div class="container">
			<h1>Type 2: Drag out any of these links to your dekstop</h1>
			<div id="links">
				<a href="http://www.thecssninja.com/demo/gmail_dragout/Eadui.ttf" id="dragout" class="dragme" draggable="true" data-downloadurl="application/octet-stream:Eadui2.ttf:http://www.thecssninja.com/demo/gmail_dragout/Eadui.ttf">Font file</a>
		
				<a href="http://www.thecssninja.com/demo/gmail_dragout/html5-cheat-sheet.pdf" id="dragout2" class="dragme" draggable="true" data-downloadurl="application/pdf:HTML5CheatSheet.pdf:http://www.thecssninja.com/demo/gmail_dragout/html5-cheat-sheet.pdf">PDF file</a>
			</div>
		</div>
	
	</section>
	<script type="text/javascript">
		var files = [document.getElementById("dragout"),document.getElementById("dragout2"),document.getElementById("dragout3")],
			fileDetails = [];
		
		// Some forward thinking, utilise the custom data attribute to extend attributes available.
		if(typeof files[0].dataset === "undefined") {
			// Grab it the old way
			fileDetails[0] = files[0].getAttribute("data-downloadurl");
			fileDetails[1] = files[1].getAttribute("data-downloadurl");
		} else {
			fileDetails[0] = files[0].dataset.downloadurl;
			fileDetails[1] = files[1].dataset.downloadurl;
		}
		
		files[0].addEventListener("dragstart",function(evt){
			evt.dataTransfer.setData("DownloadURL",fileDetails[0]);
		},false);
		files[1].addEventListener("dragstart",function(evt){
			evt.dataTransfer.setData("DownloadURL",fileDetails[1]);
		},false);
	</script>
	<!-- Google analytics -->
	<script type="text/javascript">
		var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
		document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	</script><script src="./ga.js" type="text/javascript"></script>
	<script type="text/javascript">
		var pageTracker = _gat._getTracker("UA-4638292-1");
		pageTracker._initData();
		pageTracker._trackPageview();
	</script>
</body>
</html>
